<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drowsiness Detection System</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="page-container">
    <div class="video-section">
      <h1>Drowsiness Detection</h1>
      <img src="{{ url_for('video_feed') }}" id="video" width="640" height="480">
    </div>

    <div class="stats-section">
      <h2>Live Status</h2>
      <div id="stats">
        <p><strong>FPS:</strong> <span id="fps">0</span></p>
        <p><strong>EAR:</strong> <span id="ear">0</span></p>
        <p><strong>MAR:</strong> <span id="mar">0</span></p>
        <p><strong>Frame Count:</strong> <span id="frames">0</span></p>
        <p><strong>Alert:</strong> <span id="alert">None</span></p>
      </div>
    </div>
  </div>

  <script>
    // Fetch live status every 0.5 sec
    setInterval(() => {
      fetch("/status")
        .then(res => res.json())
        .then(data => {
          document.getElementById("fps").textContent = data.fps;
          document.getElementById("ear").textContent = data.ear;
          document.getElementById("mar").textContent = data.mar;
          document.getElementById("frames").textContent = data.frame_count;
          document.getElementById("alert").textContent = data.alert;
        });
    }, 500);
  </script>
</body>
</html>
